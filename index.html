<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <title>shell 检查json文件的正确性 by conzi</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>shell 检查json文件的正确性</h1>
        <h2>技术,shell</h2>

        <section id="downloads">
          <a href="https://github.com/conzi" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h3>使用shell检查json文件的正确性</h3>

<p>使用json文件做为配置,但是每次修改总会不小心改错一点东西,少了个冒号,多了个引号什么的都很正常.有没有办法在提交正式环境之前检查一下正确性呢?
在IDE里直接集成jshint之类的自然是可以的.但如果想要通用一点,放到任意的linux机器上都可以正确执行有没有办法呢?
找到了一个解决方案:python的mjson库是个标准库,有一个方法可以用来parse json ,如果格式有问题,会报错出来</p>

<p>大致的shell如下:</p>

<pre><code>out=`cat $1 | python -mjson.tool`;

if [ -z "$out" ]
then
    echo "fail"
else
    echo "OK!"
fi
</code></pre>
      </section>
    </div>

    
  </body>
</html>